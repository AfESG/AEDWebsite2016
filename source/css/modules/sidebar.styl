@import '_variables'
@import 'typography'

aside
  background $white
  -webkit-box-shadow 0px 2px 5px rgba(0, 0, 0, 0.2)
  -moz-box-shadow 0px 2px 5px rgba(0, 0, 0, 0.2)
  box-shadow 0px 2px 5px rgba(0, 0, 0, 0.2)
  min-height 100vh
  transition width 250ms
  position relative
  z-index 2
  height 100%
  overflow hidden
  &.closed
    width 0%
    display none
  &.open
    width 35%
    display block

    @media (max-width $mobile-max)
      width 100%

  &.full
    width 100%
    display block
    .sidebar__narrative
      -webkit-column-count 3
      -moz-column-count 3
      column-count 3
      -webkit-column-gap 40px
      -moz-column-gap 40px
      column-gap 40px
      @media only screen and (min-width 641px) and (max-width 1100px) 
        -webkit-column-count 2
        -moz-column-count 2
        column-count 2
      @media only screen and (max-width 640px)
        -webkit-column-count 2
        -moz-column-count 2
        column-count 1

aside table
  width 100%

  thead
    text-align left

.sidebar__inner
  padding 25px 35px 20vh
  background #fff
  -webkit-font-smoothing antialiased
  position relative
  &:first-child
    transition padding 300ms ease-in-out
    background $brand-dark
    color #fff
    height auto
    padding-bottom 25px
    aside.full &
      padding-top 35px
  &:last-child
    overflow-y auto
    height 80vh
  
    

.sidebar__year-nav__container
  background inherit
  position relative
  -webkit-font-smoothing auto
  &:after
    position absolute
    content '\203A'
    transform rotate(90deg)
    left 42px
    top 4px

.sidebar__year-nav
  border 1px solid #fff
  border-width 0 0 1px 0
  letter-spacing 0.1em
  -webkit-appearance none
  padding 3px 16px 3px 0
  color #fff
  border-radius 0
  font-size 14px
  display table
  position absolute
  li a
    text-decoration none
    color #fff
  li:not(.current)
    display none
  &:hover
    li
      cursor pointer
      display block
      color #fff
      &:hover
        font-weight bold
  li a.disabled
    color #dddddd
    pointer-events none
    font-weight normal

.sidebar__top-nav
  margin 0 0 15px 0
  padding-left 0
  display flex
  justify-content space-between
  width 70%
  li
    font-size 13px
    position relative
    line-height 1

.sidebar__year__current
  @extend .small-current

.sidebar__viz-type
  margin-left 0
  padding-left 0
  li
    padding 1px 0

.sidebar__viz-toggle
  @extend .small-heading
  border-bottom 1px solid transparent
  line-height 1
  margin-bottom 10px
  display table
  color $gray-lightest
  font-weight 700
  text-decoration none
  padding-bottom 3px
  cursor pointer
  transition border-color 0.25s
  &.active, &:hover
    @extend .small-current
    color $white
    transition border-color 0.25s

.sidebar__entity-name
  font-family 'Noe Display', Georgia, serif
  font-weight 700
  font-style normal
  font-size 2em
  letter-spacing 0.015em
  line-height 1.15
  margin 50px 0 10px //margin top change temporary
  -webkit-font-smoothing auto

.sidebar__entity-input-zone
  font-weight normal
  font-style normal
  font-size 0.9em
  line-height 1.4
  margin-top -10px

.sidebar__stats-table
  font-size 0.9em
  width 100%
  margin-bottom 30px
  h3
    @extend .small-heading
  thead
    @extend .small-heading
    color $text-light
    border-bottom 1px solid
    td:last-child
      text-align right
  tr
    background transparent
    transition background-color 0.3s
    &:hover
      background #f8f8f8
      transition background-color 0.3s
  tbody td,
  thead th
    padding 0.5em 0.65em
    span
      color $text-light
    &:last-child
      font-weight bold
      text-align right

.count-type-toggle
  position absolute
  bottom 15px
  right 15px
  display flex
  justify-content space-between
  li
    cursor pointer
    -webkit-font-smoothing auto
    letter-spacing 1px
    font-size 10px
    width 48px
    text-align center
    margin -2px
    &:first-of-type a
      border-radius 4px 0 0 4px
    &:last-of-type a
      border-radius 0 4px 4px 0
    &.active
      cursor text
    &.active a
      background #1E1B1C
      border-top 1px solid #3F3C3D
      border-left 1px solid #3F3C3D
      border-bottom 1px solid #3F3C3D
      transition background 200ms ease-in-out
      cursor text
      pointer-events none
      &:hover
        background lighten(#1E1B1C, 5%)
    &:not(.active) a
      background #4F4C4D
      border 1px solid #313031
      &:hover
        background lighten(#4F4C4D, 5%)
    a
      color #fff
      text-decoration none
      padding 5px 8px

.sidebar__count-summary
  &--causes-of-change
    margin-top 30px

.sidebar__table-container
  border-bottom 1px solid $gray-lightest
  h3
    font-size 0.9em
    font-weight 600
    padding 0.75em 0
    cursor pointer
    position relative
    &:after
      content ''
      height 20px
      opacity 0.8
      position absolute
      width 20px
      display inline-block
      position absolute
  &.closed
    h3:after
      background url('/images/chevron-bold-down.svg') no-repeat 50% 70%
      background-size 70%
      content ''
      right 8px
    table
      display none
  &.open
    h3:after
      background url('/images/chevron-bold-up.svg') no-repeat 50% 70%
      background-size 66.7%
      content ''
      right 8px
    table
      display table

.sidebar__narrative
  margin 10px auto 15px
  max-width 1800px
  overflow hidden
  padding 0 10px

  h3
    cursor pointer
    margin-bottom 10px
    position relative
    &:after
      color #848585
      content '\276F'
      display inline-block
      position absolute
      right 10px
      top 5%
      transform rotate(90deg)
  
  &.open
    h3
      &:after
        transform rotate(-90deg)

  &.closed div
    height 0

  &.open div
    height auto
  
  p
    font-size 0.95em
    line-height 1.5
    margin 1.2em 0
    
    &:first-child
      margin-top 0

.sidebar__loader
  background-color $brand-dark
  z-index 5
  .sidebar__inner
    background-color transparent
    background-image url('/images/elephant-loader.gif')
    background-size 125px
    background-position center bottom
    background-repeat no-repeat

    height 100%
    text-align center
    width 100%
  h1
    font-size 3em
    left 50%
    line-height 1.1
    margin 0
    position absolute
    top 50%
    transform translate(-50%, -50%)
  h4
    font-size 0.75em
    letter-spacing 0.15em
    text-align center
    text-transform uppercase

.heading__small
  @extend .small-heading
  position relative

.sidebar__inner.region-southern-africa,
.sidebar__loader.region-southern-africa
  background $southern-africa
  .count-type-toggle
    li.active a
      background darken($southern-africa, 70%)
      color #bbb
      border 1px solid darken($southern-africa, 55%)
    li:not(.active) a
      background darken($southern-africa, 30%)
      color #fff
      border 1px solid darken($southern-africa, 45%)
  .sidebar__year-nav__container
    ul:hover
      background $southern-africa

.sidebar__inner.region-eastern-africa,
.sidebar__loader.region-eastern-africa
  background $eastern-africa
  .count-type-toggle
    li.active a
      background darken($eastern-africa, 70%)
      color #bbb
      border 1px solid darken($eastern-africa, 55%)
    li:not(.active) a
      background darken($eastern-africa, 30%)
      color #fff
      border 1px solid darken($eastern-africa, 45%)
  .sidebar__year-nav__container
    ul:hover
      background $eastern-africa

.sidebar__inner.region-central-africa,
.sidebar__loader.region-central-africa
  background $central-africa
  .count-type-toggle
    li.active a
      background darken($central-africa, 70%)
      color #bbb
      border 1px solid darken($central-africa, 55%)
    li:not(.active) a
      background darken($central-africa, 30%)
      color #fff
      border 1px solid darken($central-africa, 45%)
  .sidebar__year-nav__container
    ul:hover
      background $central-africa

.sidebar__inner.region-west-africa,
.sidebar__loader.region-west-africa
  background $west-africa
  .count-type-toggle
    li.active a
      background darken($west-africa, 70%)
      color #bbb
      border 1px solid darken($west-africa, 55%)
    li:not(.active) a
      background darken($west-africa, 30%)
      color #fff
      border 1px solid darken($west-africa, 45%)
      
  .sidebar__year-nav__container
    ul:hover
      background $west-africa

.sidebar__map-link
  text-decoration none
  color inherit
  
  &:hover
    text-decoration underline

.sidebar__glossary-link
  position absolute
  top 0
  right 0
  width 25px
  height 100%
  background transparent url(/images/icon-glossary.svg) no-repeat center center
  background-size 15px auto
  
